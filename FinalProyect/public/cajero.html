<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cajero - C치maras</title>
  <link rel="stylesheet" href="css/styles.css"/>
</head>
<body>
  <header>
    <img src="/img/loguito.jpeg" alt="Logo" class="header-logo"/>
    <nav>
      <ul>
        <li><a href="index.html">Base de datos</a></li>
        <li><a href="vista_salon.html">Turno trabajadores</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- Contenedor principal blanco que ocupa casi toda la pantalla -->
    <div class="cajero-container">
      <!-- Izquierda: Secci칩n de c치mara -->
      <div class="cajero-left">
        <h2>Live Feed (C치mara)</h2>
        <!-- 游댳 Secci칩n de Listado de Placas -->
    <section id="plates-section">
     
      <p>
        <strong>칔ltima Placa Detectada:</strong>
        <span id="detected-plate">No se ha detectado ninguna placa a칰n</span>
        <p>
        <strong>Timestamp:</strong>
        <span id="timestamp">--</span>
        </p>
      </p> 

        <div class="cam-feed">
          <!-- Ajusta el src a tu IP/c치mara -->
          <img src="http://44.211.67.168:5001/video_feed" alt="video_feed" />
        </div>
      </div>
      

      <!-- Derecha: Secci칩n de formulario o panel del cajero -->
      <div class="cajero-right">
        <h2>Formulario de Servicio</h2>
        <form id="cajero-form">
          <label>Nombre del cliente</label>
          <input type="text" placeholder="Nombre del cliente" />

          <label>N칰mero de tel칠fono</label>
          <input type="text" placeholder="N칰mero de tel칠fono" />

          <label>Lista de servicios</label>
          <select>
            <option>Lavado r치pido</option>
            <option>Lavado general</option>
            <option>Lavado completo</option>
          </select>

          <label>Tipo de carro</label>
          <select>
            <option>Sedan</option>
            <option>Hatchback</option>
            <option>SUV</option>
          </select>

          <label>Trabajadores asignados</label>
          <select>
            <option>Trabajador 1</option>
            <option>Trabajador 2</option>
          </select>

          <label>Ofertas</label>
          <select>
            <option>Ninguna</option>
            <option>Descuento 10%</option>
          </select>

          <button type="submit">Enviar</button>
        </form>
      </div>
    </div>
  </main>

  <!-- Scripts para socket y placas (opcional si lo deseas) -->
  <script src="/socket.io/socket.io.js"></script>
  <script>
     const socket = io();
   
     socket.on('updatePlaca', (data) => {
     document.getElementById('detected-plate').textContent = data.placa;
     document.getElementById('timestamp').textContent = data.timestamp;
     console.log("Se detect칩 una placa:", data.placa);
    });
  </script>

  <script>
    fetch('/user-info')
      .then(response => {
        if (!response.ok) {
          window.location.href = "/principal.html"; // O "/login.html"
          return Promise.reject("Usuario no autenticado. Redirigiendo...");
        }
        return response.json();
      })
      .then(data => {
        document.getElementById('username-display').textContent = data.username || 'Usuario';
      })
      .catch(err => console.error('Error obteniendo informaci칩n del usuario:', err));
  </script>
  
  
</body>
</html>



    